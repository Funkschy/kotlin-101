<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Kotlin 101</title>
<meta name="author" content="Felix Schoeller"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/solarized.css" id="theme"/>

</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Kotlin 101</h1><p class="subtitle"></p>
<h2 class="author">Felix Schoeller</h2><h2 class="date">13.06.2022</h2>
</section>

<section>
<section id="slide-orgb17d596">
<h2 id="orgb17d596"><span class="section-number-2">1.</span> Dieser Vortrag</h2>
<div class="outline-text-2" id="text-1">
</div>
</section>
<section id="slide-org063af2b">
<h3 id="org063af2b"><span class="section-number-3">1.1.</span> Basiert auf &ldquo;Kotlin in Action&rdquo;</h3>

<div id="orge6e520e" class="figure">
<p><img src="./kotlin-in-action.jpg" alt="kotlin-in-action.jpg" />
</p>
</div>
</section>
<section id="slide-org95381fd">
<h3 id="org95381fd"><span class="section-number-3">1.2.</span> Speziell für Java Programmierer</h3>
</section>
<section id="slide-orgbc31e96">
<h3 id="orgbc31e96"><span class="section-number-3">1.3.</span> Generiert aus Org Dokument</h3>
<ul>
<li>Fast alle Code Beispiele sind editierbar und ausführbar</li>
<li>Kann auch einfach als Text gelesen werden oder zu PDF generiert</li>

</ul>

</section>
</section>
<section>
<section id="slide-orgdd04869">
<h2 id="orgdd04869"><span class="section-number-2">2.</span> Warum Kotlin?</h2>
<ul>
<li>Stabile und verbreitete Sprache</li>
<li>Eleganter und Kompakter Code</li>
<li>Keine NullPointerExceptions mehr</li>
<li>100% interoperabel mit Java</li>
<li>Structured Concurrency (Coroutines)</li>
<li>Fullstack Development</li>

</ul>

<aside class="notes">
<ul>
<li>entwickelt von Jetbrains (Intellij), gepusht durch Google</li>
<li>default Sprache für Android development</li>

<li>Gute Mischung aus OOP und funktionaler Programmierung</li>
<li>DSL support (nicht im Vortrag)</li>
<li>Erweiterungen der Java stdlib für mehr Komfort</li>

<li>als ich noch bei Kosmos war: NullPointerExceptions häufigster Absturzgrund</li>
<li>nach Google: Android apps die Kotlin benutzen crashen im Schnitt 20% weniger!!</li>

<li>kann einfach als Dependency in bestehendes Maven/gradle Projekt</li>
<li>muss also nichtmal installiert werden</li>

<li>Concurrency ohne async await</li>

<li>Kotlin kann auch zu JS und nativem Code compilen (auch mit frameworks wie react js)</li>

</ul>

</aside>

</section>
<section id="slide-org4494a92">
<h3 id="org4494a92"><span class="section-number-3">2.1.</span> Zitat von developer.android.com/kotlin</h3>
<blockquote >
<p>
&ldquo;Write better Android apps faster with Kotlin. Kotlin is a modern statically typed programming language used by over 60% of professional Android developers that helps boost productivity, developer satisfaction, and code safety.&rdquo;
</p>
</blockquote>

<aside class="notes">
<p>
Schreib bessere Android apps schneller mit Kotlin. Kotlin ist eine moderne statisch typisierte
Programmiersprache, die von mehr als 60% aller professionellen Android Entwickler benutzt wird
und dabei hilft die Produktität, Entwickler Zufriedenheit und Code Sicherheit zu verbessern.
</p>

</aside>

</section>
<section id="slide-org9e15f87">
<h3 id="org9e15f87"><span class="section-number-3">2.2.</span> Gut geeignet für die Provinzial</h3>
<ul>
<li>Relativ einfach für Java Programmierer zu lernen</li>
<li>deutliche Reduktion von Crashes in Produktion</li>
<li>verbesserte Entwickler Produktität</li>
<li>kann einfach in bestehende Projekte eingebaut werden</li>

</ul>

</section>
</section>
<section>
<section id="slide-org0776771">
<h2 id="org0776771"><span class="section-number-2">3.</span> Geschichte</h2>
<div class="outline-text-2" id="text-3">
</div>
</section>
<section id="slide-org8c720ff">
<h3 id="org8c720ff"><span class="section-number-3">3.1.</span> Jetbrains 2010</h3>
</section>
<section id="slide-org4c4bc06">
<h3 id="org4c4bc06"><span class="section-number-3">3.2.</span> IntelliJ Team war neidisch auf das Rider (C#) Team</h3>
<ul>
<li><p>
&ldquo;We were somewhat envious of our colleagues on the .NET team who were developing in C#, a modern, powerful, rapidly evolving language. But we didn’t see any language that we could use instead of Java&rdquo;
</p>
<aside class="notes">
<p>
Wir waren ein bisschen neidisch auf unsere Kollegen im .NET team, die in C# entwickelt haben,
einer modernen, mächtigen und sich schnell entwickelnden Sprache.
Aber wir konnten keine andere Sprache finden die wir statt Java benutzen könnten.
</p>

</aside></li>

</ul>
</section>
<section id="slide-orgc1f5855">
<h3 id="orgc1f5855"><span class="section-number-3">3.3.</span> Anforderungen an Kotlin</h3>
<ul>
<li>statisch typisiert</li>
<li>100% Kompatibilität mit bestehenden Java Bibliotheken</li>
<li>Tooling Qualität und hohe Entwickler Produktivität</li>
<li>Leicht zu lernen und verstehen</li>
<li>Selbe performance with Java</li>

</ul>
</section>
<section id="slide-org29d6367">
<h3 id="org29d6367"><span class="section-number-3">3.4.</span> Name: Insel vor St. Petersburg</h3>
</section>
</section>
<section>
<section id="slide-orgcb1032f">
<h2 id="orgcb1032f"><span class="section-number-2">4.</span> Einfaches Beispiel</h2>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">data</span> <span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Person</span> (<span style="color: #fb4934;">val</span> <span style="color: #83a598;">name</span>: <span style="color: #fabd2f;">String</span>,
                   <span style="color: #fb4934;">val</span> <span style="color: #83a598;">age</span>: <span style="color: #fabd2f;">Int?</span> = <span style="color: #d3869b;">null</span>)

<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">main</span>() {
    <span style="color: #fb4934;">val</span> <span style="color: #83a598;">people</span> = listOf(
        <span style="color: #fabd2f;">Person</span>(<span style="color: #b8bb26;">"Alice"</span>),
        <span style="color: #fabd2f;">Person</span>(<span style="color: #b8bb26;">"Bob"</span>, age = <span style="color: #d3869b; font-weight: bold;">30</span>)
    )

    <span style="color: #fb4934;">val</span> <span style="color: #83a598;">oldest</span> = people.maxByOrNull { <span style="color: #fb4934;">it</span>.age ?: <span style="color: #d3869b; font-weight: bold;">0</span> }
    println(<span style="color: #b8bb26;">"Die &#228;lteste Person ist: </span><span style="color: #83a598;">$oldest</span><span style="color: #b8bb26;">"</span>)
}

main()
</code></pre>
</div>

<aside class="notes">
<ul>
<li>Interessante Eigenschaften im Beispiel</li>
<li>data class (wie Java 14 records)</li>
<li>implementieren toString, equals, hashCode, getter (&amp; setter) automatisch</li>

<li>val = final</li>

<li>nullable Int</li>
<li>Kotlin ist komplett null-safe -&gt; keine NullPointerExceptions</li>
<li>wenn man null braucht: Compiler check of man auf null geprüft hat</li>
<li>mehr dazu später</li>

<li>top level Funktion -&gt; wird zu statischer methode compiled</li>
<li>kein Semikolon</li>
<li>benannte (optionale) Argumente (age=)</li>
<li>Lambda Block</li>
<li>Elvis operator</li>
<li>it.age ?: 0 &lt;=&gt; (it.age == null) ? 0 : it.age</li>

</ul>

</aside>


</section>
</section>
<section>
<section id="slide-org528650c">
<h2 id="org528650c"><span class="section-number-2">5.</span> Exkurs: Funktionale Programmierung</h2>
<div class="outline-text-2" id="text-5">
</div>
</section>
<section id="slide-orgc281c9b">
<h3 id="orgc281c9b"><span class="section-number-3">5.1.</span> Konzepte</h3>
<div class="outline-text-3" id="text-5-1">
</div>
</section>
<section id="slide-org761c645">
<h4 id="org761c645"><span class="section-number-4">5.1.1.</span> First-class Funktionen</h4>
<ul>
<li>Funktionen können als Parameter übergeben werden</li>
<li>Funktionen können als Rückgabewert benutzt werden</li>

</ul>
</section>
<section id="slide-org283eb35">
<h4 id="org283eb35"><span class="section-number-4">5.1.2.</span> Immutability</h4>
<div class="outline-text-4" id="text-5-1-2">
</div>
<ol class="org-ol">
<li><a id="org4a6d1e0"></a>Objekte können nicht verändert werden (nur getter, keine setter)<br /></li>
<li><a id="org15791a6"></a>Vorteile<br />
<ul>
<li>deutlich einfacher zu handhaben -&gt; Zustand spielt keine Rolle</li>
<li>einfacher zu testen</li>
<li>einfacher zu multithreaden -&gt; keine Mutexe oder sonstige Synchronisation</li>

</ul>
</li>
</ol>
</section>
<section id="slide-org46fb9e5">
<h4 id="org46fb9e5"><span class="section-number-4">5.1.3.</span> Keine Seiteneffekte</h4>
<ul>
<li>Funktionen sollten pur sein -&gt; bei Aufruf mit den selben Parametern immer das selbe Ergebnis</li>
<li>Funktionen verändern nichts am Zustand der Anwendung</li>

</ul>
</section>
<section id="slide-orge587681">
<h3 id="orge587681"><span class="section-number-3">5.2.</span> Kotlin ist wesentlich fokussierter auf funktionale Programmierung als Java</h3>
<ul>
<li>Java hat stream API, aber die Collections selber sind mutable</li>
<li>Lambdas/Funktions Typen sind deutlich angenehmer in kotlin</li>
<li>alle Collections in Kotlin sind dafür gebaut funktional benutzt zu werden (z.B. maxByOrNull)</li>

</ul>
</section>
<section id="slide-org9f5f0af">
<h3 id="org9f5f0af"><span class="section-number-3">5.3.</span> Aber: Kotlin erzwingt keine funktionale Programmierung</h3>
<ul>
<li>OOP oder imperativer code lässt sich genauso schreiben wie in Java wenn gewünscht</li>
<li>das macht Kotlin zu einer guten Einstiegssprache um funktionale Konzepte zu lernen</li>

</ul>

</section>
</section>
<section>
<section id="slide-orgbc9d1f5">
<h2 id="orgbc9d1f5"><span class="section-number-2">6.</span> Basics</h2>
<div class="outline-text-2" id="text-6">
</div>
</section>
<section id="slide-org5e6c4d6">
<h3 id="org5e6c4d6"><span class="section-number-3">6.1.</span> Funktionen und Variablen</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">main</span>(args: <span style="color: #fabd2f;">Array&lt;String&gt;</span>) {
    println(<span style="color: #b8bb26;">"Hello World"</span>)
}
</code></pre>
</div>

<aside class="notes">
<ul>
<li>Was können wir hier schon über die Sprache lernen?</li>
<li>fun keyword um Funktionen zu deklarieren</li>
<li>Typ nach dem Namen</li>
<li>top level Funktionen</li>
<li>Arrays sind nur Klassen, keine spezielle Syntax</li>
<li>viele wrapper für die stdlib mit vereinfachter Syntax, wie z.B. println</li>
<li>Semicolon optional</li>

</ul>

</aside>

</section>
<section id="slide-org0ccfc24">
<h3 id="org0ccfc24"><span class="section-number-3">6.2.</span> Weiteres Beispiel</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">max</span>(a: <span style="color: #fabd2f;">Int</span>, b: <span style="color: #fabd2f;">Int</span>): <span style="color: #fabd2f;">Int</span> {
    <span style="color: #fb4934;">return</span> <span style="color: #fb4934;">if</span> (a &gt; b) a <span style="color: #fb4934;">else</span> b
}

max(<span style="color: #d3869b; font-weight: bold;">1</span>, <span style="color: #d3869b; font-weight: bold;">2</span>)
</code></pre>
</div>

<ul>
<li>return type nach Parameter Liste</li>
<li>if expression anstatt ternary: (a &gt; b) ? a : b</li>

</ul>

</section>
<section id="slide-org6400c49">
<h3 id="org6400c49"><span class="section-number-3">6.3.</span> Kann sogar vereinfacht werden</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim>
<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">max</span>(a: <span style="color: #fabd2f;">Int</span>, b: <span style="color: #fabd2f;">Int</span>) = <span style="color: #fb4934;">if</span> (a &gt; b) a <span style="color: #fb4934;">else</span> b

max(<span style="color: #d3869b; font-weight: bold;">1</span>, <span style="color: #d3869b; font-weight: bold;">2</span>)

</code></pre>
</div>

</section>
<section id="slide-orgf347de1">
<h3 id="orgf347de1"><span class="section-number-3">6.4.</span> Variablen</h3>
<div class="outline-text-3" id="text-6-4">
</div>
</section>
<section id="slide-org90ad820">
<h4 id="org90ad820"><span class="section-number-4">6.4.1.</span> Format: (val|var) Name(: Typ) = Wert</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">val</span> <span style="color: #83a598;">frage</span> = <span style="color: #b8bb26;">"Die ultimative Frage nach dem Leben,"</span> +
<span style="color: #b8bb26;">"dem Universum und dem ganzen Rest"</span>
<span style="color: #fb4934;">val</span> <span style="color: #83a598;">antwort</span> = <span style="color: #d3869b; font-weight: bold;">42</span>

<span style="color: #928374;">// </span><span style="color: #928374;">alternativ</span>
<span style="color: #fb4934;">val</span> <span style="color: #83a598;">antwort</span>: <span style="color: #fabd2f;">Int</span> = <span style="color: #d3869b; font-weight: bold;">42</span>
</code></pre>
</div>

<aside class="notes">
<ul>
<li>default type für ints ist Int</li>

</ul>

</aside>

</section>
<section id="slide-org82601ea">
<h4 id="org82601ea"><span class="section-number-4">6.4.2.</span> Im Normalfall immer alles val(ue) machen</h4>
</section>
<section id="slide-orgf7f99d3">
<h4 id="orgf7f99d3"><span class="section-number-4">6.4.3.</span> falls var(iablen) benötigt werden:</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">var</span> <span style="color: #83a598;">message</span> = <span style="color: #b8bb26;">"test"</span>
message = <span style="color: #b8bb26;">"reassigned"</span>

message
</code></pre>
</div>
</section>
<section id="slide-org49bfbc3">
<h4 id="org49bfbc3"><span class="section-number-4">6.4.4.</span> val != immutable</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">val</span> <span style="color: #83a598;">sprachen</span> = arrayListOf(<span style="color: #b8bb26;">"Java"</span>, <span style="color: #b8bb26;">"Clojure"</span>, <span style="color: #b8bb26;">"Scala"</span>)
sprachen.add(<span style="color: #b8bb26;">"Kotlin"</span>)

sprachen.joinToString(<span style="color: #b8bb26;">", "</span>)
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-console"   ><code trim>Java, Clojure, Scala, Kotlin
</code></pre>
</div>

</section>
<section id="slide-org7a39950">
<h4 id="org7a39950"><span class="section-number-4">6.4.5.</span> Kotlin verwendet aber normalerweise immutable Datenstrukturen</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">val</span> <span style="color: #83a598;">sprachen</span> = listOf(<span style="color: #b8bb26;">"Java"</span>, <span style="color: #b8bb26;">"Clojure"</span>, <span style="color: #b8bb26;">"Scala"</span>)
sprachen.add(<span style="color: #b8bb26;">"Kotlin"</span>) <span style="color: #928374;">// </span><span style="color: #928374;">compile Fehler (keine add Methode)</span>

sprachen.joinToString(<span style="color: #b8bb26;">", "</span>)
</code></pre>
</div>

</section>
<section id="slide-org92cea19">
<h3 id="org92cea19"><span class="section-number-3">6.5.</span> String templating</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim>
<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">main</span>(args: <span style="color: #fabd2f;">Array&lt;String&gt;</span>) {
    <span style="color: #fb4934;">val</span> <span style="color: #83a598;">name</span> = <span style="color: #fb4934;">if</span> (args.size &gt; <span style="color: #d3869b; font-weight: bold;">0</span>) {
        args[<span style="color: #d3869b; font-weight: bold;">0</span>]
    } <span style="color: #fb4934;">else</span> {
        <span style="color: #b8bb26;">"Anonymous user"</span>
    }
    println(<span style="color: #b8bb26;">"Hello, </span><span style="color: #83a598;">$names</span><span style="color: #b8bb26;">!"</span>) <span style="color: #928374;">// </span><span style="color: #928374;">&lt;=&gt; "Hello, " + name + "!"</span>
}
</code></pre>
</div>

<aside class="notes">
<ul>
<li>für s am ende von name(s) -&gt; ${name}s</li>

</ul>

</aside>

<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim>
<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">main</span>(args: <span style="color: #fabd2f;">Array&lt;String&gt;</span>) {
    <span style="color: #928374;">// </span><span style="color: #928374;">&lt;=&gt; "Hello, " + (args.length &gt; 0) ? args[0] : "Anonymous user"  + "!"</span>
    println(<span style="color: #b8bb26;">"Hello, ${</span><span style="color: #fb4934;">if</span> (args.size &gt; <span style="color: #d3869b; font-weight: bold;">0</span>) args[<span style="color: #d3869b; font-weight: bold;">0</span>] <span style="color: #fb4934;">else</span> <span style="color: #b8bb26;">"Anonymous user"}!"</span>)
}
</code></pre>
</div>
</section>
<section id="slide-orgd969f29">
<h3 id="orgd969f29"><span class="section-number-3">6.6.</span> Objektorientierung</h3>
<div class="outline-text-3" id="text-6-6">
</div>
</section>
<section id="slide-org8d6f744">
<h4 id="org8d6f744"><span class="section-number-4">6.6.1.</span> Java Klasse</h4>
<div class="org-src-container">

<pre  class="src src-java"   ><code trim><span style="color: #fb4934;">public</span> <span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Person</span> <span style="color: #fe8019;">{</span>
    <span style="color: #fb4934;">private</span> <span style="color: #fb4934;">final</span> <span style="color: #fabd2f;">String</span> <span style="color: #83a598;">name</span>; <span style="color: #928374;">// </span><span style="color: #928374;">in echt nat&#252;rlich nicht final!</span>
    <span style="color: #fb4934;">private</span> <span style="color: #fabd2f;">boolean</span> <span style="color: #83a598;">verheiratet</span>;

    <span style="color: #fb4934;">public</span> <span style="color: #b8bb26;">Person</span><span style="color: #cc241d;">(</span><span style="color: #fabd2f;">String</span> <span style="color: #83a598;">name</span>, <span style="color: #fabd2f;">boolean</span> <span style="color: #83a598;">verheiratet</span><span style="color: #cc241d;">)</span> <span style="color: #cc241d;">{</span>
        <span style="color: #fb4934;">this</span>.name = name;
        <span style="color: #fb4934;">this</span>.verheiratet = verheiratet;
    <span style="color: #cc241d;">}</span>

    <span style="color: #fb4934;">public</span> <span style="color: #b8bb26;">Person</span><span style="color: #cc241d;">(</span><span style="color: #fabd2f;">String</span> <span style="color: #83a598;">name</span><span style="color: #cc241d;">)</span> <span style="color: #cc241d;">{</span>
        <span style="color: #fb4934;">this</span><span style="color: #b8bb26;">(</span>name, <span style="color: #d3869b;">false</span><span style="color: #b8bb26;">)</span>;
    <span style="color: #cc241d;">}</span>

    <span style="color: #928374;">// </span><span style="color: #928374;">&gt; 30 Zeilen getter/setter/toString/hashCode/equals</span>
<span style="color: #fe8019;">}</span>
</code></pre>
</div>

</section>
<section id="slide-orgfb735e7">
<h4 id="orgfb735e7"><span class="section-number-4">6.6.2.</span> Java Aufruf</h4>
<div class="org-src-container">

<pre  class="src src-java"   ><code trim><span style="color: #fb4934;">public</span> <span style="color: #fb4934;">static</span> <span style="color: #fabd2f;">void</span> <span style="color: #b8bb26;">printStatus</span><span style="color: #fe8019;">(</span><span style="color: #fabd2f;">Person</span> <span style="color: #83a598;">person</span><span style="color: #fe8019;">)</span> <span style="color: #fe8019;">{</span>
    <span style="color: #fabd2f;">var</span> <span style="color: #83a598;">infix</span> = <span style="color: #cc241d;">(</span>person.isVerheiratet<span style="color: #b8bb26;">()</span><span style="color: #cc241d;">)</span>
        ? <span style="color: #b8bb26;">""</span>
        : <span style="color: #b8bb26;">"nicht "</span>;
    System.out.println<span style="color: #cc241d;">(</span>person.getName<span style="color: #b8bb26;">()</span>
                       + <span style="color: #b8bb26;">" ist "</span>
                       + infix
                       + <span style="color: #b8bb26;">"verheiratet"</span>
                       <span style="color: #cc241d;">)</span>;
<span style="color: #fe8019;">}</span>

</code></pre>
</div>
<div class="org-src-container">

<pre  class="src src-java"   ><code trim><span style="color: #fb4934;">public</span> <span style="color: #fb4934;">static</span> <span style="color: #fabd2f;">void</span> <span style="color: #b8bb26;">main</span><span style="color: #fe8019;">(</span><span style="color: #fabd2f;">String</span><span style="color: #cc241d;">[]</span> <span style="color: #83a598;">args</span><span style="color: #fe8019;">)</span> <span style="color: #fe8019;">{</span>
    <span style="color: #fabd2f;">var</span> <span style="color: #83a598;">person</span> = <span style="color: #fb4934;">new</span> <span style="color: #fabd2f;">Person</span><span style="color: #cc241d;">(</span><span style="color: #b8bb26;">"Bob"</span>, <span style="color: #d3869b;">false</span><span style="color: #cc241d;">)</span>;
    printStatus<span style="color: #cc241d;">(</span>person<span style="color: #cc241d;">)</span>;
    person.setVerheiratet<span style="color: #cc241d;">(</span><span style="color: #d3869b;">true</span><span style="color: #cc241d;">)</span>;
    printStatus<span style="color: #cc241d;">(</span>person<span style="color: #cc241d;">)</span>;
<span style="color: #fe8019;">}</span>
</code></pre>
</div>

</section>
<section id="slide-org99a2889">
<h4 id="org99a2889"><span class="section-number-4">6.6.3.</span> Kotlin ohne Accessor</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">data</span> <span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Person</span>(<span style="color: #fb4934;">val</span> <span style="color: #83a598;">name</span>: <span style="color: #fabd2f;">String</span>,
                  <span style="color: #fb4934;">var</span> <span style="color: #83a598;">isVerheiratet</span>: <span style="color: #fabd2f;">Boolean</span> = <span style="color: #d3869b;">false</span>)

<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">printStatus</span>(person: <span style="color: #fabd2f;">Person</span>) {
    <span style="color: #928374;">// </span><span style="color: #928374;">ruft tats&#228;chlich getter auf</span>
    <span style="color: #fb4934;">val</span> <span style="color: #83a598;">infix</span> = <span style="color: #fb4934;">if</span> (person.isVerheiratet) <span style="color: #b8bb26;">""</span> <span style="color: #fb4934;">else</span> <span style="color: #b8bb26;">" nicht"</span>
    println(<span style="color: #b8bb26;">"${</span>person.name<span style="color: #b8bb26;">} ist</span><span style="color: #83a598;">$infix</span><span style="color: #b8bb26;"> verheiratet"</span>)
}

<span style="color: #fb4934;">val</span> <span style="color: #83a598;">person</span> = <span style="color: #fabd2f;">Person</span>(<span style="color: #b8bb26;">"Bob"</span>, isVerheiratet = <span style="color: #d3869b;">false</span>)
printStatus(person)
person.isVerheiratet = <span style="color: #d3869b;">true</span> <span style="color: #928374;">// </span><span style="color: #928374;">ruft tats&#228;chlich setter auf!</span>
printStatus(person)
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-console"   ><code trim>Bob ist nicht verheiratet
Bob ist verheiratet
</code></pre>
</div>

</section>
<section id="slide-org7b82dce">
<h4 id="org7b82dce"><span class="section-number-4">6.6.4.</span> Kotlin mit Accessor</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Person</span>(<span style="color: #fb4934;">val</span> <span style="color: #83a598;">name</span>: <span style="color: #fabd2f;">String</span>,
             <span style="color: #fb4934;">private</span> <span style="color: #fb4934;">var</span> <span style="color: #83a598;">verheiratet</span>: <span style="color: #fabd2f;">Boolean</span> = <span style="color: #d3869b;">false</span>) {

    <span style="color: #fb4934;">var</span> <span style="color: #83a598;">isVerheiratet</span>: <span style="color: #fabd2f;">Boolean</span>
        <span style="color: #fb4934;">get</span>() {
            println(<span style="color: #b8bb26;">"isVerheiratet hat wert </span><span style="color: #83a598;">$verheiratet</span><span style="color: #b8bb26;">"</span>)
            <span style="color: #fb4934;">return</span> verheiratet
        }
        <span style="color: #fb4934;">set</span>(value) {
            println(<span style="color: #b8bb26;">"verheiratet = </span><span style="color: #83a598;">$value</span><span style="color: #b8bb26;">"</span>)
            verheiratet = value
        }
}
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">val</span> <span style="color: #83a598;">person</span> = <span style="color: #fabd2f;">Person</span>(<span style="color: #b8bb26;">"Bob"</span>, <span style="color: #d3869b;">false</span>)
printStatus(person)
person.isVerheiratet = <span style="color: #d3869b;">true</span> <span style="color: #928374;">// </span><span style="color: #928374;">ruft tats&#228;chlich setter auf!</span>
printStatus(person)
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-console"   ><code trim>isVerheiratet hat wert false
Bob ist nicht verheiratet
verheiratet = true
isVerheiratet hat wert true
Bob ist verheiratet
</code></pre>
</div>

</section>
<section id="slide-orgef3df4f">
<h4 id="orgef3df4f"><span class="section-number-4">6.6.5.</span> Accessor können auch Werte berechnen</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Rechteck</span>(<span style="color: #fb4934;">val</span> <span style="color: #83a598;">breite</span>: <span style="color: #fabd2f;">Int</span>, <span style="color: #fb4934;">val</span> <span style="color: #83a598;">hoehe</span>: <span style="color: #fabd2f;">Int</span>) {
    <span style="color: #fb4934;">val</span> <span style="color: #83a598;">isQuadrat</span>: <span style="color: #fabd2f;">Boolean</span>
        <span style="color: #fb4934;">get</span>() = breite == hoehe
}

println(<span style="color: #fabd2f;">Rechteck</span>(<span style="color: #d3869b; font-weight: bold;">20</span>, <span style="color: #d3869b; font-weight: bold;">20</span>).isQuadrat) <span style="color: #928374;">// </span><span style="color: #928374;">true</span>
println(<span style="color: #fabd2f;">Rechteck</span>(<span style="color: #d3869b; font-weight: bold;">30</span>, <span style="color: #d3869b; font-weight: bold;">20</span>).isQuadrat) <span style="color: #928374;">// </span><span style="color: #928374;">false</span>
</code></pre>
</div>

<aside class="notes">
<ul>
<li>Generiert einen isQuadrat getter, der auch aus Java gerufen werden kann</li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-orgcf20169">
<h2 id="orgcf20169"><span class="section-number-2">7.</span> Code Struktur (Pakete und Ordner)</h2>
<div class="outline-text-2" id="text-7">
</div>
</section>
<section id="slide-orge57134a">
<h3 id="orge57134a"><span class="section-number-3">7.1.</span> package/import Statements</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">package</span> <span style="color: #b8bb26;">geometrie.formen</span>

<span style="color: #fb4934;">import</span> <span style="color: #b8bb26;">java.util.Random</span>

<span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Rechteck</span>(<span style="color: #fb4934;">val</span> <span style="color: #83a598;">breite</span>: <span style="color: #fabd2f;">Int</span>, <span style="color: #fb4934;">val</span> <span style="color: #83a598;">hoehe</span>: <span style="color: #fabd2f;">Int</span>) {
    <span style="color: #fb4934;">val</span> <span style="color: #83a598;">isQuadrat</span>: <span style="color: #fabd2f;">Boolean</span>
        <span style="color: #fb4934;">get</span>() = breite == hoehe
}

<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">zufaelligesRechteck</span>(): <span style="color: #fabd2f;">Rechteck</span> {
    <span style="color: #fb4934;">val</span> <span style="color: #83a598;">random</span> = <span style="color: #fabd2f;">Random</span>()
    <span style="color: #fb4934;">return</span> <span style="color: #fabd2f;">Rechteck</span>(random.nextInt(), random.nextInt())
}

println(zufaelligesRechteck().isQuadrat)
</code></pre>
</div>

</section>
<section id="slide-org05db715">
<h3 id="org05db715"><span class="section-number-3">7.2.</span> Package vs Ordner</h3>

<div id="orgcef322c" class="figure">
<p><img src="./java-packages.png" alt="java-packages.png" />
</p>
<p><span class="figure-number">Figure 1: </span>In Java müssen packages die Ordner Struktur reflektieren</p>
</div>


<div id="org18ae4ec" class="figure">
<p><img src="./kotlin-packages.png" alt="kotlin-packages.png" />
</p>
<p><span class="figure-number">Figure 2: </span>In Kotlin ist das nicht der Fall</p>
</div>

</section>
</section>
<section>
<section id="slide-orgc719ee5">
<h2 id="orgc719ee5"><span class="section-number-2">8.</span> Entscheidungen: enums &amp; when</h2>
<div class="outline-text-2" id="text-8">
</div>
</section>
<section id="slide-org28218a0">
<h3 id="org28218a0"><span class="section-number-3">8.1.</span> Enums wie in Java</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">enum</span> <span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Farbe</span> {
    <span style="color: #fabd2f;">ROT</span>, <span style="color: #fabd2f;">ORGANGE</span>, <span style="color: #fabd2f;">GELB</span>, <span style="color: #fabd2f;">GRUEN</span>, <span style="color: #fabd2f;">BLAU</span>
}
</code></pre>
</div>

</section>
<section id="slide-org3d2e662">
<h3 id="org3d2e662"><span class="section-number-3">8.2.</span> Können auch Felder haben</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">enum</span> <span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Farbe</span> (<span style="color: #fb4934;">val</span> <span style="color: #83a598;">r</span>: <span style="color: #fabd2f;">Int</span>, <span style="color: #fb4934;">val</span> <span style="color: #83a598;">g</span>: <span style="color: #fabd2f;">Int</span>, <span style="color: #fb4934;">val</span> <span style="color: #83a598;">b</span>: <span style="color: #fabd2f;">Int</span>) {
    <span style="color: #fabd2f;">ROT</span>(<span style="color: #d3869b; font-weight: bold;">255</span>, <span style="color: #d3869b; font-weight: bold;">0</span>, <span style="color: #d3869b; font-weight: bold;">0</span>),
    <span style="color: #fabd2f;">ORANGE</span>(<span style="color: #d3869b; font-weight: bold;">255</span>, <span style="color: #d3869b; font-weight: bold;">165</span>, <span style="color: #d3869b; font-weight: bold;">0</span>),
    <span style="color: #fabd2f;">GELB</span>(<span style="color: #d3869b; font-weight: bold;">255</span>, <span style="color: #d3869b; font-weight: bold;">255</span>, <span style="color: #d3869b; font-weight: bold;">0</span>),
    <span style="color: #fabd2f;">GRUEN</span>(<span style="color: #d3869b; font-weight: bold;">0</span>, <span style="color: #d3869b; font-weight: bold;">255</span>, <span style="color: #d3869b; font-weight: bold;">0</span>),
    <span style="color: #fabd2f;">VIOLET</span>(<span style="color: #d3869b; font-weight: bold;">238</span>, <span style="color: #d3869b; font-weight: bold;">130</span>, <span style="color: #d3869b; font-weight: bold;">238</span>),
    <span style="color: #fabd2f;">BLAU</span>(<span style="color: #d3869b; font-weight: bold;">0</span>, <span style="color: #d3869b; font-weight: bold;">0</span>, <span style="color: #d3869b; font-weight: bold;">255</span>);

    <span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">rgb</span>() = (r * <span style="color: #d3869b; font-weight: bold;">256</span> + g) * <span style="color: #d3869b; font-weight: bold;">256</span> + b
}

<span style="color: #fabd2f;">Farbe.ORANGE.rgb</span>()
</code></pre>
</div>

</section>
<section id="slide-org3065def">
<h3 id="org3065def"><span class="section-number-3">8.3.</span> &rsquo;when&rsquo; in Kombination mit enums</h3>
<div class="outline-text-3" id="text-8-3">
</div>
</section>
<section id="slide-org68794c5">
<h4 id="org68794c5"><span class="section-number-4">8.3.1.</span> when ist wie switch auf Steroiden</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">getBeispielPflanze</span>(farbe: <span style="color: #fabd2f;">Farbe</span>) = <span style="color: #fb4934;">when</span> (farbe) {
    <span style="color: #fabd2f;">Farbe.ROT</span> -&gt; <span style="color: #b8bb26;">"Tomate"</span>
    <span style="color: #fabd2f;">Farbe.ORANGE</span> -&gt; <span style="color: #b8bb26;">"Orange"</span>
    <span style="color: #fabd2f;">Farbe.GELB</span> -&gt; <span style="color: #b8bb26;">"Banane"</span>
    <span style="color: #fabd2f;">Farbe.GRUEN</span> -&gt; <span style="color: #b8bb26;">"Kiwi"</span>
    <span style="color: #fabd2f;">Farbe.VIOLET</span> -&gt; <span style="color: #b8bb26;">"Feige"</span>
    <span style="color: #928374;">// </span><span style="color: #928374;">Compilefehler wenn nicht alle m&#246;glichen Werte</span>
    <span style="color: #928374;">// </span><span style="color: #928374;">abgefragt werden</span>
    <span style="color: #928374;">// </span><span style="color: #928374;">Farbe.BLAU -&gt; "Blaubeere"</span>
}
</code></pre>
</div>

</section>
<section id="slide-org2f2a99d">
<h4 id="org2f2a99d"><span class="section-number-4">8.3.2.</span> Bedingungen können mit &rsquo;,&rsquo; verbunden werden</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">getWaerme</span>(farbe: <span style="color: #fabd2f;">Farbe</span>) = <span style="color: #fb4934;">when</span> (farbe) {
    <span style="color: #fabd2f;">Farbe.ROT</span>, <span style="color: #fabd2f;">Farbe.ORANGE</span>, <span style="color: #fabd2f;">Farbe.GELB</span> -&gt; <span style="color: #b8bb26;">"warm"</span>
    <span style="color: #fabd2f;">Farbe.GRUEN</span> -&gt; <span style="color: #b8bb26;">"neutral"</span>
    <span style="color: #fabd2f;">Farbe.BLAU</span>, <span style="color: #fabd2f;">Farbe.VIOLET</span> -&gt; <span style="color: #b8bb26;">"kalt"</span>
}
</code></pre>
</div>
</section>
<section id="slide-orge31bcea">
<h4 id="orge31bcea"><span class="section-number-4">8.3.3.</span> &rsquo;when&rsquo; funktioniert aber mit allen Objekten</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">mix</span>(f1: <span style="color: #fabd2f;">Farbe</span>, f2: <span style="color: #fabd2f;">Farbe</span>) = <span style="color: #fb4934;">when</span>(setOf(f1, f2)) {
    setOf(<span style="color: #fabd2f;">Farbe.ROT</span>, <span style="color: #fabd2f;">Farbe.GELB</span>) -&gt; <span style="color: #fabd2f;">Farbe.ORANGE</span>
    setOf(<span style="color: #fabd2f;">Farbe.GELB</span>, <span style="color: #fabd2f;">Farbe.BLAU</span>) -&gt; <span style="color: #fabd2f;">Farbe.GRUEN</span>
    <span style="color: #fb4934;">else</span> -&gt; <span style="color: #fb4934;">throw</span> <span style="color: #fabd2f;">Exception</span>(
        <span style="color: #b8bb26;">"Farben </span><span style="color: #83a598;">$f1</span><span style="color: #b8bb26;"> und </span><span style="color: #83a598;">$f2</span><span style="color: #b8bb26;"> k&#246;nnen nicht vermischt werden"</span>
    )
}

mix(<span style="color: #fabd2f;">Farbe.BLAU</span>, <span style="color: #fabd2f;">Farbe.GELB</span>)
</code></pre>
</div>
<aside class="notes">
<ul>
<li>argument für when kann jedes Objekt sein</li>
<li>werden von oben nach unten mit equals verglichen</li>
<li>else falls nix vorher matcht</li>

</ul>

</aside>
</section>
<section id="slide-org7a033f1">
<h4 id="org7a033f1"><span class="section-number-4">8.3.4.</span> &rsquo;when&rsquo; klappt auch ohne Argument</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">mixPerformant</span>(f1: <span style="color: #fabd2f;">Farbe</span>, f2: <span style="color: #fabd2f;">Farbe</span>) = <span style="color: #fb4934;">when</span> {
    (f1 == <span style="color: #fabd2f;">Farbe.ROT</span> &amp;&amp; f2 == <span style="color: #fabd2f;">Farbe.GELB</span>)
    || (f1 == <span style="color: #fabd2f;">Farbe.GELB</span> &amp;&amp; f2 == <span style="color: #fabd2f;">Farbe.ROT</span>)-&gt; <span style="color: #fabd2f;">Farbe.ORANGE</span>

    (f1 == <span style="color: #fabd2f;">Farbe.GELB</span> &amp;&amp; f2 == <span style="color: #fabd2f;">Farbe.BLAU</span>)
    || (f1 == <span style="color: #fabd2f;">Farbe.BLAU</span> &amp;&amp; f2 == <span style="color: #fabd2f;">Farbe.GELB</span>)-&gt; <span style="color: #fabd2f;">Farbe.GRUEN</span>

    <span style="color: #fb4934;">else</span> -&gt; <span style="color: #fb4934;">throw</span> <span style="color: #fabd2f;">Exception</span>(
        <span style="color: #b8bb26;">"Farben </span><span style="color: #83a598;">$f1</span><span style="color: #b8bb26;"> und </span><span style="color: #83a598;">$f2</span><span style="color: #b8bb26;"> k&#246;nnen nicht vermischt werden"</span>
    )
}

mixPerformant(<span style="color: #fabd2f;">Farbe.BLAU</span>, <span style="color: #fabd2f;">Farbe.GELB</span>)
</code></pre>
</div>
<aside class="notes">
<ul>
<li>wenn kein Argument übergeben wird, ist die branch condition ein beliebiger boolean ausdruck</li>
<li>fancy if-else</li>

</ul>

</aside>
</section>
<section id="slide-org16afee9">
<h3 id="org16afee9"><span class="section-number-3">8.4.</span> Smart casts</h3>
<div class="outline-text-3" id="text-8-4">
</div>
</section>
<section id="slide-org1aa1eb7">
<h4 id="org1aa1eb7"><span class="section-number-4">8.4.1.</span> Kombination von Type Check und Cast</h4>
</section>
<section id="slide-orgd59fd82">
<h4 id="orgd59fd82"><span class="section-number-4">8.4.2.</span> Beispiel: Simpler Interpreter</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">interface</span> <span style="color: #fabd2f;">Expr</span>
<span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Zahl</span>(<span style="color: #fb4934;">val</span> <span style="color: #83a598;">wert</span>: <span style="color: #fabd2f;">Int</span>): <span style="color: #fabd2f;">Expr</span>
<span style="color: #fb4934;">class</span> <span style="color: #fabd2f;">Plus</span>(<span style="color: #fb4934;">val</span> <span style="color: #83a598;">links</span>: <span style="color: #fabd2f;">Expr</span>, <span style="color: #fb4934;">val</span> <span style="color: #83a598;">rechts</span>: <span style="color: #fabd2f;">Expr</span>): <span style="color: #fabd2f;">Expr</span>
</code></pre>
</div>

<aside class="notes">
<ul>
<li>leeres interface</li>
<li>2 beliebige Expressions können summiert werden</li>

</ul>

</aside>
</section>
<section id="slide-orgc3007e0">
<h4 id="orgc3007e0"><span class="section-number-4">8.4.3.</span> Simpler AST</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">1</span>), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">2</span>)), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">4</span>))
</code></pre>
</div>

<div id="org6a1dbe1" class="figure">
<p><img src="./tree.png" alt="tree.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Ausdruck als Baum</p>
</div>
</section>
<section id="slide-org67f7f77">
<h4 id="org67f7f77"><span class="section-number-4">8.4.4.</span> Evaluierung ohne when</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">eval</span>(e: <span style="color: #fabd2f;">Expr</span>): <span style="color: #fabd2f;">Int</span> {
    <span style="color: #fb4934;">if</span> (e <span style="color: #fb4934;">is</span> <span style="color: #fabd2f;">Zahl</span>) {
        <span style="color: #928374;">// </span><span style="color: #928374;">dieser cast ist redundant</span>
        <span style="color: #fb4934;">val</span> <span style="color: #83a598;">n</span> = e <span style="color: #fb4934;">as</span> <span style="color: #fabd2f;">Zahl</span>
        <span style="color: #fb4934;">return</span> n.wert
    }
    <span style="color: #fb4934;">if</span> (e <span style="color: #fb4934;">is</span> <span style="color: #fabd2f;">Plus</span>) {
        <span style="color: #928374;">// </span><span style="color: #928374;">direkter Zugriff auf Felder nach 'is'</span>
        <span style="color: #fb4934;">return</span> eval(e.links) + eval(e.rechts)
    }
    <span style="color: #fb4934;">throw</span> <span style="color: #fabd2f;">IllegalArgumentException</span>(<span style="color: #b8bb26;">"Unbekannter Ausdruck"</span>)
}
eval(<span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">1</span>), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">2</span>)), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">4</span>)))
</code></pre>
</div>

<aside class="notes">
<ul>
<li>Nach Vergleich mit &rsquo;is&rsquo; wird das Objekt automatisch gecastet</li>
<li>sonst funktioniert &rsquo;is&rsquo; wie &rsquo;instanceof&rsquo;</li>

</ul>

</aside>
</section>
<section id="slide-org5672eca">
<h4 id="org5672eca"><span class="section-number-4">8.4.5.</span> Schönere Lösung mit &rsquo;when&rsquo;</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">eval</span>(e: <span style="color: #fabd2f;">Expr</span>): <span style="color: #fabd2f;">Int</span> = <span style="color: #fb4934;">when</span>(e) {
    <span style="color: #fb4934;">is</span> <span style="color: #fabd2f;">Zahl</span> -&gt; e.wert
    <span style="color: #fb4934;">is</span> <span style="color: #fabd2f;">Plus</span> -&gt; eval(e.links) + eval(e.rechts)
    <span style="color: #fb4934;">else</span> -&gt; <span style="color: #fb4934;">throw</span> <span style="color: #fabd2f;">IllegalArgumentException</span>(
        <span style="color: #b8bb26;">"Unbekannter Ausdruck"</span>
    )
}
eval(<span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">1</span>), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">2</span>)), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">4</span>)))
</code></pre>
</div>
</section>
<section id="slide-orgfebdd78">
<h4 id="orgfebdd78"><span class="section-number-4">8.4.6.</span> Eval branches können auch Blöcke sein</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">evalMitLog</span>(e: <span style="color: #fabd2f;">Expr</span>): <span style="color: #fabd2f;">Int</span> = <span style="color: #fb4934;">when</span>(e) {
    <span style="color: #fb4934;">is</span> <span style="color: #fabd2f;">Zahl</span> -&gt; {
        println(<span style="color: #b8bb26;">"Zahl: ${</span>e.wert<span style="color: #b8bb26;">}"</span>)
        e.wert
    }
    <span style="color: #fb4934;">is</span> <span style="color: #fabd2f;">Plus</span> -&gt; {
        <span style="color: #fb4934;">val</span> <span style="color: #83a598;">links</span> = evalMitLog(e.links)
        <span style="color: #fb4934;">val</span> <span style="color: #83a598;">rechts</span> = evalMitLog(e.rechts)
        println(<span style="color: #b8bb26;">"</span><span style="color: #83a598;">$links</span><span style="color: #b8bb26;"> + </span><span style="color: #83a598;">$rechts</span><span style="color: #b8bb26;">"</span>)
        links + rechts
    }
    <span style="color: #fb4934;">else</span> -&gt; <span style="color: #fb4934;">throw</span> <span style="color: #fabd2f;">IllegalArgumentException</span>(
        <span style="color: #b8bb26;">"Unbekannter Ausdruck"</span>
    )
}
</code></pre>
</div>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim>evalMitLog(<span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Plus</span>(<span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">1</span>), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">2</span>)), <span style="color: #fabd2f;">Zahl</span>(<span style="color: #d3869b; font-weight: bold;">4</span>)))
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-console"   ><code trim>Zahl: 1
Zahl: 2
1 + 2
Zahl: 4
3 + 4
</code></pre>
</div>

<aside class="notes">
<ul>
<li>Blöcke in Kotlin sind auch Expressions</li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-org31682b9">
<h2 id="org31682b9"><span class="section-number-2">9.</span> Iterieren: &rsquo;while&rsquo; und &rsquo;for&rsquo;</h2>
<div class="outline-text-2" id="text-9">
</div>
</section>
<section id="slide-org5bc3f30">
<h3 id="org5bc3f30"><span class="section-number-3">9.1.</span> while genau wie in Java</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">var</span> <span style="color: #83a598;">i</span> = <span style="color: #d3869b; font-weight: bold;">0</span>
<span style="color: #fb4934;">while</span> (i &lt; <span style="color: #d3869b; font-weight: bold;">10</span>) {
    println(i)
    i++
}
</code></pre>
</div>
</section>
<section id="slide-org4a6d81e">
<h3 id="org4a6d81e"><span class="section-number-3">9.2.</span> for basiert auf Iterators</h3>
</section>
<section id="slide-org01a9c97">
<h3 id="org01a9c97"><span class="section-number-3">9.3.</span> Iterator über aufeinanderfolgende Zahlen: range</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #928374;">// </span><span style="color: #928374;">10 inklusive</span>
<span style="color: #fb4934;">val</span> <span style="color: #83a598;">einsBisZehn</span> = <span style="color: #d3869b; font-weight: bold;">1</span>..<span style="color: #d3869b; font-weight: bold;">10</span>
<span style="color: #928374;">// </span><span style="color: #928374;">10 ausgeschlossen</span>
<span style="color: #fb4934;">val</span> <span style="color: #83a598;">einsBisNeun</span> = <span style="color: #d3869b; font-weight: bold;">1</span> until <span style="color: #d3869b; font-weight: bold;">10</span>
</code></pre>
</div>
</section>
<section id="slide-orgfc471bc">
<h3 id="orgfc471bc"><span class="section-number-3">9.4.</span> for Schleife mit Range</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">fizzBuzz</span> (i: <span style="color: #fabd2f;">Int</span>) = <span style="color: #fb4934;">when</span> {
    i % <span style="color: #d3869b; font-weight: bold;">15</span> == <span style="color: #d3869b; font-weight: bold;">0</span> -&gt; <span style="color: #b8bb26;">"FizzBuzz"</span>
    i % <span style="color: #d3869b; font-weight: bold;">3</span> == <span style="color: #d3869b; font-weight: bold;">0</span> -&gt; <span style="color: #b8bb26;">"Fizz"</span>
    i % <span style="color: #d3869b; font-weight: bold;">5</span> == <span style="color: #d3869b; font-weight: bold;">0</span> -&gt; <span style="color: #b8bb26;">"Buzz"</span>
    <span style="color: #fb4934;">else</span> -&gt; <span style="color: #b8bb26;">"</span><span style="color: #83a598;">$i</span><span style="color: #b8bb26;">"</span>
}

<span style="color: #fb4934;">for</span> (i <span style="color: #fb4934;">in</span> <span style="color: #d3869b; font-weight: bold;">1</span>..<span style="color: #d3869b; font-weight: bold;">20</span>) {
    print(<span style="color: #b8bb26;">"${</span>fizzBuzz(i)<span style="color: #b8bb26;">} "</span>)
}
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-console"   ><code trim>1 2 Fizz 4 Buzz Fizz 7 8 Fizz Buzz 11 Fizz 13 14 FizzBuzz 16 17 Fizz 19 Buzz
</code></pre>
</div>

</section>
<section id="slide-orgb41ffb6">
<h3 id="orgb41ffb6"><span class="section-number-3">9.5.</span> Kann auch andere Schrittweite als +1</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">for</span> (i <span style="color: #fb4934;">in</span> <span style="color: #d3869b; font-weight: bold;">100</span> downTo <span style="color: #d3869b; font-weight: bold;">1</span> step <span style="color: #d3869b; font-weight: bold;">2</span>) {
    print(<span style="color: #b8bb26;">"${</span>fizzBuzz(i)<span style="color: #b8bb26;">} "</span>)
}
</code></pre>
</div>

<aside class="notes">
<ul>
<li>[100, 2]</li>

</ul>

</aside>
</section>
<section id="slide-org9f813a1">
<h3 id="org9f813a1"><span class="section-number-3">9.6.</span> Funktioniert auch mit anderen Daten als Int Ranges</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">import</span> <span style="color: #b8bb26;">java.util.TreeMap</span>

<span style="color: #928374;">// </span><span style="color: #928374;">treemap ist &#228;hnlich wie HashMap aber sortiert</span>
<span style="color: #fb4934;">val</span> <span style="color: #83a598;">binaerDarstellungen</span> = <span style="color: #fabd2f;">TreeMap&lt;Char</span>, <span style="color: #fabd2f;">String&gt;</span>()

<span style="color: #fb4934;">for</span> (c <span style="color: #fb4934;">in</span> <span style="color: #b8bb26;">'A'</span>..<span style="color: #b8bb26;">'F'</span>) {
    binaerDarstellungen[c] = <span style="color: #fabd2f;">Integer.toBinaryString</span>(c.toInt())
}

<span style="color: #fb4934;">for</span> ((buchstabe, binaer) <span style="color: #fb4934;">in</span> binaerDarstellungen) {
    println(<span style="color: #b8bb26;">"</span><span style="color: #83a598;">$buchstabe</span><span style="color: #b8bb26;"> = </span><span style="color: #83a598;">$binaer</span><span style="color: #b8bb26;">"</span>)
}

</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-console"   ><code trim>A = 1000001
B = 1000010
C = 1000011
D = 1000100
E = 1000101
F = 1000110
</code></pre>
</div>

<aside class="notes">
<ul>
<li>&rsquo;..&rsquo; kann auch ranges aus chars erstellen</li>
<li>(eins, zwei) Syntax packt key/value Paar aus</li>

</ul>

</aside>
</section>
<section id="slide-orga82a0c0">
<h3 id="orga82a0c0"><span class="section-number-3">9.7.</span> Der &rsquo;in&rsquo; Operator</h3>
<div class="outline-text-3" id="text-9-7">
</div>
</section>
<section id="slide-org8636697">
<h4 id="org8636697"><span class="section-number-4">9.7.1.</span> Äquivalent zu x &gt;= start &amp;&amp; x &lt;= end</h4>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">istBuchstabe</span>(c: <span style="color: #fabd2f;">Char</span>) = c <span style="color: #fb4934;">in</span> <span style="color: #b8bb26;">'a'</span>..<span style="color: #b8bb26;">'z'</span> || c <span style="color: #fb4934;">in</span> <span style="color: #b8bb26;">'A'</span>..<span style="color: #b8bb26;">'Z'</span>
<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">istNichtZiffer</span>(c: <span style="color: #fabd2f;">Char</span>) = c !<span style="color: #fb4934;">in</span> <span style="color: #b8bb26;">'0'</span>..<span style="color: #b8bb26;">'9'</span>

istBuchstabe(<span style="color: #b8bb26;">'q'</span>) <span style="color: #928374;">// </span><span style="color: #928374;">true</span>
istNichtZiffer(<span style="color: #b8bb26;">'q'</span>) <span style="color: #928374;">// </span><span style="color: #928374;">true</span>
</code></pre>
</div>
</section>
<section id="slide-org7aba906">
<h3 id="org7aba906"><span class="section-number-3">9.8.</span> Klappt auch in &rsquo;when&rsquo; branches</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">ermittleTyp</span>(c: <span style="color: #fabd2f;">Char</span>) = <span style="color: #fb4934;">when</span> (c) {
    <span style="color: #fb4934;">in</span> <span style="color: #b8bb26;">'0'</span>..<span style="color: #b8bb26;">'9'</span> -&gt; <span style="color: #b8bb26;">"Ziffer"</span>
    <span style="color: #fb4934;">in</span> <span style="color: #b8bb26;">'a'</span>..<span style="color: #b8bb26;">'z'</span>, <span style="color: #fb4934;">in</span> <span style="color: #b8bb26;">'A'</span>..<span style="color: #b8bb26;">'Z'</span> -&gt; <span style="color: #b8bb26;">"Buchstabe"</span>
    <span style="color: #fb4934;">else</span> -&gt; <span style="color: #b8bb26;">"Keine Ahnung"</span>
}
ermittleTyp(<span style="color: #b8bb26;">'x'</span>) <span style="color: #928374;">// </span><span style="color: #928374;">Buchstabe</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgfec5db8">
<h2 id="orgfec5db8"><span class="section-number-2">10.</span> Exceptions</h2>
<div class="outline-text-2" id="text-10">
</div>
</section>
<section id="slide-org1eadf34">
<h3 id="org1eadf34"><span class="section-number-3">10.1.</span> Eigentlich wie in Java, aber ohne checked Exceptions</h3>
</section>
<section id="slide-orge4b6ada">
<h3 id="orge4b6ada"><span class="section-number-3">10.2.</span> try kann auch als Expression verwendet werden</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">import</span> <span style="color: #b8bb26;">java.io.BufferedReader</span>
<span style="color: #fb4934;">import</span> <span style="color: #b8bb26;">java.io.StringReader</span>

<span style="color: #fb4934;">fun</span> <span style="color: #b8bb26;">parseZahl</span>(reader: <span style="color: #fabd2f;">BufferedReader</span>) = <span style="color: #fb4934;">try</span> {
    <span style="color: #fabd2f;">Integer.parseInt</span>(reader.readLine())
} <span style="color: #fb4934;">catch</span> (e: <span style="color: #fabd2f;">NumberFormatException</span>) {
    <span style="color: #d3869b;">null</span>
}

parseZahl(<span style="color: #fabd2f;">BufferedReader</span>(<span style="color: #fabd2f;">StringReader</span>(<span style="color: #b8bb26;">"keine Zahl"</span>)))
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org3d0cc29">
<h2 id="org3d0cc29"><span class="section-number-2">11.</span> Collections</h2>
<div class="outline-text-2" id="text-11">
</div>
</section>
<section id="slide-org5d9d2ab">
<h3 id="org5d9d2ab"><span class="section-number-3">11.1.</span> Einfache Erstellung</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">val</span> <span style="color: #83a598;">menge</span> = setOf(<span style="color: #d3869b; font-weight: bold;">1</span>, <span style="color: #d3869b; font-weight: bold;">2</span>, <span style="color: #d3869b; font-weight: bold;">3</span>)
<span style="color: #fb4934;">val</span> <span style="color: #83a598;">liste</span> = listOf(<span style="color: #d3869b; font-weight: bold;">1</span>, <span style="color: #d3869b; font-weight: bold;">2</span>, <span style="color: #d3869b; font-weight: bold;">3</span>)
<span style="color: #fb4934;">val</span> <span style="color: #83a598;">map</span>   = mapOf(<span style="color: #d3869b; font-weight: bold;">1</span> to <span style="color: #b8bb26;">"one"</span>, <span style="color: #d3869b; font-weight: bold;">2</span> to <span style="color: #b8bb26;">"two"</span>, <span style="color: #d3869b; font-weight: bold;">3</span> to <span style="color: #b8bb26;">"three"</span>)
</code></pre>
</div>

<aside class="notes">
<ul>
<li>normale Java collections!</li>
<li>komplett interoperabel</li>
<li>to ist eine normale Funktion (man kann auch eigene infix Funktionen machen)</li>

</ul>

</aside>
</section>
<section id="slide-orgb3abc16">
<h3 id="orgb3abc16"><span class="section-number-3">11.2.</span> Benutzung wurde erweitert</h3>
<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">val</span> <span style="color: #83a598;">strings</span> = listOf(<span style="color: #b8bb26;">"eins"</span>, <span style="color: #b8bb26;">"zwei"</span>, <span style="color: #b8bb26;">"drei"</span>)
println(strings.lastOrNull())

<span style="color: #fb4934;">val</span> <span style="color: #83a598;">zahlen</span> = setOf(<span style="color: #d3869b; font-weight: bold;">1</span>, <span style="color: #d3869b; font-weight: bold;">42</span>, <span style="color: #d3869b; font-weight: bold;">2</span>)
println(zahlen.maxOrNull())
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-console"   ><code trim>drei
42
</code></pre>
</div>
</section>
<section id="slide-orgc870cc1">
<h3 id="orgc870cc1"><span class="section-number-3">11.3.</span> Extension Methods</h3>
<div class="org-src-container">

<pre  class="src src-java"   ><code trim><span style="color: #fb4934;">import</span> <span style="color: #d3869b;">java</span>.<span style="color: #d3869b;">util</span>.<span style="color: #fabd2f;">Optional</span>;

<span style="color: #fb4934;">public</span> <span style="color: #fb4934;">static</span> <span style="color: #fabd2f;">Optional</span><span style="color: #fe8019;">&lt;</span><span style="color: #fabd2f;">Character</span><span style="color: #fe8019;">&gt;</span> <span style="color: #b8bb26;">lastChar</span><span style="color: #fe8019;">(</span><span style="color: #fabd2f;">String</span> <span style="color: #83a598;">s</span><span style="color: #fe8019;">)</span> <span style="color: #fe8019;">{</span>
    <span style="color: #fb4934;">if</span> <span style="color: #cc241d;">(</span>s == <span style="color: #d3869b;">null</span> || s.length<span style="color: #b8bb26;">()</span> == <span style="color: #d3869b; font-weight: bold;">0</span><span style="color: #cc241d;">)</span> <span style="color: #cc241d;">{</span>
        <span style="color: #fb4934;">return</span> Optional.empty<span style="color: #b8bb26;">()</span>;
    <span style="color: #cc241d;">}</span>
    <span style="color: #fb4934;">return</span> Optional.of<span style="color: #cc241d;">(</span>s.charAt<span style="color: #b8bb26;">(</span>s.length<span style="color: #83a598;">()</span> - <span style="color: #d3869b; font-weight: bold;">1</span><span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span>;
<span style="color: #fe8019;">}</span>

<span style="color: #fb4934;">public</span> <span style="color: #fb4934;">static</span> <span style="color: #fabd2f;">void</span> <span style="color: #b8bb26;">main</span><span style="color: #fe8019;">(</span><span style="color: #fabd2f;">String</span> <span style="color: #83a598;">args</span><span style="color: #cc241d;">[]</span><span style="color: #fe8019;">)</span> <span style="color: #fe8019;">{</span>
    System.out.println<span style="color: #cc241d;">(</span>lastChar<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"test"</span><span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span>; <span style="color: #928374;">// </span><span style="color: #928374;">Optional.of('t')</span>
    System.out.println<span style="color: #cc241d;">(</span>lastChar<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span><span style="color: #cc241d;">)</span>;     <span style="color: #928374;">// </span><span style="color: #928374;">Optional.empty()</span>
<span style="color: #fe8019;">}</span>
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-kotlin"   ><code trim><span style="color: #fb4934;">fun</span> <span style="color: #fabd2f;">String.lastChar</span>() = getOrNull(length - <span style="color: #d3869b; font-weight: bold;">1</span>)

println(<span style="color: #b8bb26;">"test"</span>.lastChar()) <span style="color: #928374;">// </span><span style="color: #928374;">'t'</span>
println(<span style="color: #b8bb26;">""</span>.lastChar())     <span style="color: #928374;">// </span><span style="color: #928374;">null</span>
</code></pre>
</div>

<aside class="notes">
<ul>
<li>kleiner Abstecher weil viele der Methoden auf Kotlin collections so funktionieren</li>
<li>wird zu statischer method compiled -&gt; kein Zugriff auf private member</li>
<li>erstes Argument ist receiver (hier string)</li>
<li>receiver wird zu this gebunden</li>
<li>geht auch mit properties (verhält sich dann wie ein Feld)</li>

</ul>

</aside>
</section>
</section>
<section>
<section id="slide-orgf6be8d6">
<h2 id="orgf6be8d6"><span class="section-number-2">12.</span> Resourcen</h2>
<ul>
<li><a href="https://kotlinlang.org/">https://kotlinlang.org/</a></li>
<li><a href="https://play.kotlinlang.org">https://play.kotlinlang.org</a></li>
<li><a href="https://developer.android.com/courses/kotlin-bootcamp/overview">https://developer.android.com/courses/kotlin-bootcamp/overview</a></li>
<li>Kotlin in Action (Quelle für diesen Vortrag)</li>

</ul>
</section>
</section>
<section>
<section id="slide-org4911d73">
<h2 id="org4911d73"><span class="section-number-2">13.</span> Fragen?</h2>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom/zoom.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealMarkdown, RevealZoom, RevealNotes]
});

</script>
</body>
</html>
